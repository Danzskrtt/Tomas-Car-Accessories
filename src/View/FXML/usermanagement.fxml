<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="780.0" prefWidth="1530.0" style="-fx-background-color: #f5f5f5;" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controller.usermanagementcontroller">
   <children>
      <!-- Left Navigation Sidebar -->
      <VBox alignment="TOP_CENTER" prefHeight="780.0" prefWidth="220.0" spacing="10.0" style="-fx-background-color: linear-gradient(to bottom, #DC143C, #8B0000);" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.topAnchor="0.0">
         <padding>
            <Insets bottom="20.0" left="15.0" right="15.0" top="30.0" />
         </padding>
         
         <ImageView fitHeight="75.0" fitWidth="160.0" pickOnBounds="true" preserveRatio="true">
            <image>
               <Image url="@../pics/1000098939.png" />
            </image>
         </ImageView>
         
         <Separator style="-fx-background-color: rgba(255,255,255,0.3);">
            <VBox.margin>
               <Insets bottom="20.0" />
            </VBox.margin>
         </Separator>
         
         <!-- Dashboard Button -->
         <Button fx:id="btnDashboard" alignment="CENTER_LEFT" maxWidth="Infinity" onAction="#handleBack" style="-fx-background-color: rgba(255,255,255,0.1); -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 15; -fx-background-radius: 8; -fx-cursor: hand;" text="Dashboard">
            <graphic>
               <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="ðŸ " />
            </graphic>
            <VBox.margin>
               <Insets bottom="8.0" />
            </VBox.margin>
         </Button>
         
         <!-- User Management Button (Active) -->
         <Button fx:id="btnUserManagement" alignment="CENTER_LEFT" maxWidth="Infinity" style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 15; -fx-background-radius: 8; -fx-cursor: hand;" text="User Management">
            <graphic>
               <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="ðŸ‘¥" />
            </graphic>
            <VBox.margin>
               <Insets bottom="8.0" />
            </VBox.margin>
         </Button>
         
         <!-- Customer Button -->
         <Button fx:id="btnCustomerManagement" alignment="CENTER_LEFT" maxWidth="Infinity" style="-fx-background-color: rgba(255,255,255,0.1); -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 15; -fx-background-radius: 8; -fx-cursor: hand;" text="Customer">
            <graphic>
               <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="ðŸ‘¤" />
            </graphic>
            <VBox.margin>
               <Insets bottom="8.0" />
            </VBox.margin>
         </Button>
         
         <!-- Service Booking Button -->
         <Button fx:id="btnServiceBooking" alignment="CENTER_LEFT" maxWidth="Infinity" style="-fx-background-color: rgba(255,255,255,0.1); -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 15; -fx-background-radius: 8; -fx-cursor: hand;" text="Service Booking">
            <graphic>
               <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="ðŸ“…" />
            </graphic>
            <VBox.margin>
               <Insets bottom="8.0" />
            </VBox.margin>
         </Button>
         
         <!-- Inventory Button -->
         <Button fx:id="btnInventory" alignment="CENTER_LEFT" maxWidth="Infinity" style="-fx-background-color: rgba(255,255,255,0.1); -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 15; -fx-background-radius: 8; -fx-cursor: hand;" text="Inventory">
            <graphic>
               <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="ðŸ“¦" />
            </graphic>
            <VBox.margin>
               <Insets bottom="8.0" />
            </VBox.margin>
         </Button>
         
         <!-- Sales Button -->
         <Button fx:id="btnSales" alignment="CENTER_LEFT" maxWidth="Infinity" style="-fx-background-color: rgba(255,255,255,0.1); -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 15; -fx-background-radius: 8; -fx-cursor: hand;" text="Sales">
            <graphic>
               <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="ðŸ’°" />
            </graphic>
            <VBox.margin>
               <Insets bottom="8.0" />
            </VBox.margin>
         </Button>
         
         <!-- Reports Button -->
         <Button fx:id="btnReports" alignment="CENTER_LEFT" maxWidth="Infinity" style="-fx-background-color: rgba(255,255,255,0.1); -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 15; -fx-background-radius: 8; -fx-cursor: hand;" text="Reports">
            <graphic>
               <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="ðŸ“Š" />
            </graphic>
            <VBox.margin>
               <Insets bottom="8.0" />
            </VBox.margin>
         </Button>
         
         <!-- Spacer to push logout to bottom -->
         <VBox VBox.vgrow="ALWAYS" />
         
         <Separator style="-fx-background-color: rgba(255,255,255,0.3);">
            <VBox.margin>
               <Insets bottom="10.0" top="10.0" />
            </VBox.margin>
         </Separator>
         
         <!-- Logout Button -->
         <Button fx:id="btnLogout" alignment="CENTER_LEFT" maxWidth="Infinity" onAction="#handleLogout" style="-fx-background-color: rgba(255,0,0,0.3); -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 15; -fx-background-radius: 8; -fx-cursor: hand; -fx-border-color: rgba(255,255,255,0.3); -fx-border-width: 1; -fx-border-radius: 8;" text="Logout">
            <graphic>
               <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="ðŸšª" />
            </graphic>
         </Button>
      </VBox>
      
      <!-- Main Content Area -->
      <VBox prefHeight="780.0" prefWidth="1310.0" spacing="20.0" style="-fx-background-color: #f5f5f5;" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="220.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
         <padding>
            <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
         </padding>
         
         <!-- Page Header -->
         <VBox spacing="5.0">
            <Label style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #DC143C;" text="User Management">
               <font>
                  <Font name="System Bold" size="32" />
               </font>
            </Label>
         </VBox>
        <VBox spacing="15" style="-fx-padding: 20;">
            
            <!-- Search and Action Bar -->
            <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 10; -fx-background-color: #F5F5F5; -fx-background-radius: 10;">
                <Label style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333333;" text="Search:" />
                <TextField fx:id="searchField" prefWidth="300" promptText="Search by username or name..." style="-fx-background-color: white; -fx-border-color: #DDDDDD; -fx-border-radius: 5; -fx-background-radius: 5; -fx-padding: 8;" />
                <Button fx:id="btnSearch" onAction="#handleSearch" style="-fx-background-color: #DC143C; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 20; -fx-background-radius: 5; -fx-cursor: hand;" text="Search" />
                <Button fx:id="btnRefresh" onAction="#handleRefresh" style="-fx-background-color: #FF6B6B; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 20; -fx-background-radius: 5; -fx-cursor: hand;" text="Refresh" />
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="lblTotalUsers" style="-fx-font-size: 13px; -fx-text-fill: #666666; -fx-font-weight: bold;" text="Total Users: 0" />
            </HBox>
            
            <!-- Table View -->
            <TableView fx:id="userTable" prefHeight="400" style="-fx-background-color: white; -fx-border-color: #DDDDDD; -fx-border-radius: 10; -fx-background-radius: 10;">
                <columns>
                    <TableColumn fx:id="colUserId" prefWidth="60" style="-fx-alignment: CENTER;" text="ID" />
                    <TableColumn fx:id="colUsername" prefWidth="120" text="Username" />
                    <TableColumn fx:id="colPassword" prefWidth="120" text="Password" />
                    <TableColumn fx:id="colFirstName" prefWidth="120" text="First Name" />
                    <TableColumn fx:id="colLastName" prefWidth="120" text="Last Name" />
                    <TableColumn fx:id="colEmail" prefWidth="180" text="Email" />
                    <TableColumn fx:id="colRole" prefWidth="100" text="Role" />
                    <TableColumn fx:id="colPhone" prefWidth="120" text="Phone" />
                    <TableColumn fx:id="colIsActive" prefWidth="70" style="-fx-alignment: CENTER;" text="Status" />
                    <TableColumn fx:id="colCreatedAt" prefWidth="140" text="Created At" />
                    <TableColumn fx:id="colLastLogin" prefWidth="140" text="Last Login" />
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                </columnResizePolicy>
            </TableView>
            
            <!-- Action Buttons Section -->
            <HBox alignment="CENTER" spacing="15">
                <Button fx:id="btnAdd" onAction="#handleAdd" prefHeight="50.0" prefWidth="172.0" style="-fx-background-color: #DC143C; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 30; -fx-background-radius: 8; -fx-cursor: hand;" text="Add New User">
                    <graphic>
                        <Label style="-fx-font-size: 18px; -fx-text-fill: white; -fx-font-weight: bold;" text="+" />
                    </graphic>
                </Button>
                <Button fx:id="btnEdit" onAction="#handleEdit" prefHeight="50.0" prefWidth="120.0" style="-fx-background-color: #FF6B6B; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 30; -fx-background-radius: 8; -fx-cursor: hand;" text="Edit User" />
                <Button fx:id="btnDelete" onAction="#handleDelete" prefHeight="50.0" prefWidth="137.0" style="-fx-background-color: #8B0000; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 30; -fx-background-radius: 8; -fx-cursor: hand;" text="Delete User" />
                <Button fx:id="btnView" onAction="#handleView" prefHeight="50.0" prefWidth="142.0" style="-fx-background-color: #696969; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 30; -fx-background-radius: 8; -fx-cursor: hand;" text="View Details" />
            </HBox>
         </VBox>
            
      </VBox>
   </children>
</AnchorPane>
